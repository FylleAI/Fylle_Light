# Alembic Configuration — CGS-MVP
#
# Usiamo Alembic in modalita "SQL-only" (Opzione B):
# - Le migrazioni contengono SQL puro via op.execute()
# - NON usiamo modelli SQLAlchemy (il backend usa supabase-py)
# - DATABASE_URL va configurata in .env (vedi .env.example)
#
# ===== COMANDI RAPIDI =====
#
# Controllare lo stato attuale:
#   cd backend && alembic current
#
# Vedere la storia delle migrazioni:
#   alembic history --verbose
#
# Creare una nuova migrazione:
#   alembic revision -m "add_column_x_to_table_y"
#   (poi modifica il file generato in alembic/versions/)
#
# Applicare tutte le migrazioni pendenti:
#   alembic upgrade head
#
# Tornare indietro di una migrazione:
#   alembic downgrade -1
#
# Marcare il DB come aggiornato (senza eseguire nulla):
#   alembic stamp head

[alembic]
# Path alla directory con env.py e versions/
script_location = alembic

# Template per nuove migration
file_template = %%(rev)s_%%(slug)s

# Lasciato vuoto — viene overriddato da env.py che legge settings.py
sqlalchemy.url =

# Timezone per i revision ID
# timezone =

# Logging
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
