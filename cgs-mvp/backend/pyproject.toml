# === Ruff — Python linter & formatter ===
# Docs: https://docs.astral.sh/ruff/
#
# Usage:
#   ruff check app/           ← find lint errors
#   ruff check app/ --fix     ← auto-fix safe issues
#   ruff format app/          ← format code
#   ruff format app/ --check  ← verify formatting without changes

[tool.ruff]
target-version = "py311"       # Match Dockerfile production
line-length = 120

[tool.ruff.lint]
select = [
    "E",    # pycodestyle errors (indentation, whitespace, syntax)
    "F",    # pyflakes (unused imports, undefined names)
    "I",    # isort (import ordering)
    "UP",   # pyupgrade (modernize Python syntax for 3.11+)
    "B",    # flake8-bugbear (common bugs and design issues)
]
ignore = [
    "E501",   # line too long — handled by formatter
    "B008",   # do not perform function call in argument defaults (FastAPI Depends pattern)
    "B904",   # raise in except clause without `from` — good practice, will fix incrementally
    "UP042",  # use StrEnum instead of (str, Enum) — requires careful migration, deferred to M1
]

[tool.ruff.lint.isort]
known-first-party = ["app"]

# === Pytest (ready for M1) ===
# Uncomment when tests are added:
# [tool.pytest.ini_options]
# testpaths = ["tests"]
# asyncio_mode = "auto"
